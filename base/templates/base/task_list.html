{% extends 'base/main.html' %} 
{% block content %}
<!-- homepage tasks listing  -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do</title>
</head>
<body>
    

</body> -->

<div class="header-bar">
    <div>
        <h1>Hello {{request.user | title}}</h1>    
        <h3 style = "margin: 0"> You have <i>{{count}}</i> Incomplete task{{count|pluralize:"s"}} </h3> 
    </div>
    {% if request.user.is_authenticated %}
    <!-- <a href="{% url 'logout' %}">Log Out</a>       Won't work error 405 get instead of post, need csrf token by django -->
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="styled-button" >Logout</button>
    </form>
    {% else %}
    <a href="{% url 'login' %}" class="styled-button" >Log In</a>
    {% endif %}
</div>


<!-- 
<hr>
<h1>My To Do List</h1>
<a href="{% url 'task-create' %}"> Add Items</a>

<form method="get" id="search-form" >
    <input type="search" name="search-area" value="{% if search_input %}{{ search_input }}{% else %}Search{% endif %}" onfocus="clearSearchHint(this)" onblur="restoreSearchHint(this)">
    <input type="submit" value="Search">
</form> -->

<form id="search-form" action="/search" method="get">
<div class="search">
    <input type="text" class="search__input" placeholder="Search">
    <button class="search__button">
        <svg class="search__icon" aria-hidden="true" viewBox="0 0 24 24">
            <g>
                <path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path>
            </g>
        </svg>
    </button>
</div>
</form>

<div class="task-item-wrapper">
    {% for task in tasks %}
        <div class="task-wrapper">
            {% if task.complete %}
                <div class="task-title">
                    <div class="task-complete-icon"></div>
                    <i><s><a href="{% url 'task-update' task.id %}">{{task}}</a></s></i>
                </div>
                <a class="delete-link" href="{% url 'task-delete' task.id %}">&#215;</a>
            {% else %}
                <div class="task-title">
                    <div class="task-incomplete-icon"></div>
                    <i><a href="{% url 'task-update' task.id %}">{{task}}</a></i>
                </div>
                <a class="delete-link" href="{% url 'task-delete' task.id %}">&#215;</a>
            {% endif %}
        </div>
    {% empty %}
    <h3>No Items in List</h3>
    {% endfor %}
</div>



<!-- 

<div class="cards-container">
    <!- - Loop through all the items - ->
    {% for task in tasks %}
    <div class="card1">
        <a href="{% url 'task-update' task.id %}">
            <p>{{ task.title }}</p>
            <!- - <p class="small">details </p> - ->
            <div class="go-corner" href="#">
                <div class="go-arrow">
                    â†’
                </div>
            </div>
        </a>
        <div class="card-actions">
            <!- - <a class="delete-link" href="{% url 'task-delete' task.id %}">&#215;</a> - ->
            <!- - <a href="{% url 'task-update' task.id %}" class="styled-button">Edit</a> - ->
            <a href="{% url 'task-delete' task.id %}" class="styled-button-delete">x</a>
        </div>
    </div>
    {% empty %}
    <h3>No Items in List</h3>
    {% endfor %}
</div>

 -->




<!-- 
<table>
    <tr>
        <th>Items</th>              <! -- th acts as cell header - ->
        <th> </th>                  <!- -   #td only shows if we've a th for each td- >
        <th> </th>
        <th> </th>
    </tr>
    <!- - loop through all the items  - ->
    {% for task in tasks %}   <!- - this si django templating syntax- ->
    <tr>
        <td>{{task.title}}</td>                                     <!- - td acts as cell value - ->
    <!-  -    <td><a href="{% url 'task' task.id %}">View</a></td> - ->
        <td><a href="{% url 'task-update' task.id %}">Edit</a></td>
        <td><a href="{% url 'task-delete' task.id %}">Delete</a></td>
    </tr>
    {% empty %}
    <h3>No Items in List</h3>
    {% endfor %}
</table> -->




<script>
    function clearSearchHint(input) {
        if (input.value === "Search") {
            input.value = "";
        }
    }
    function restoreSearchHint(input) {
        if (input.value === "") {
            document.getElementById("search-form").submit(); // Submit the form when search input is cleared
            input.value = "Search";
        }
    }
</script>

{% endblock content %}
<!-- </html> -->

